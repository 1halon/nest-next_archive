(()=>{"use strict";var e={};(()=>{var t=e;
/*!*************************************!*\
  !*** ./client/private/ts/global.ts ***!
  \*************************************/Object.defineProperty(t,"__esModule",{value:!0}),t.injectClassNames=t.RTCConnection=t.Logger=void 0;class n{constructor(e){this.title=e}debug(e,t,n){const i={args:[],message:"",title:this.title};if("object"==typeof e)Object.keys(e).forEach((t=>i[t]=e[t]));else i.args=null!=t?t:[],i.message=null!=e?e:"",i.title=null!=n?n:this.title;console.log(`%c[${i.title}]`,"color: purple;",i.message,...i.args)}error(){console.error.apply(this,arguments)}log(){console.log.apply(this,arguments)}warn(){console.warn.apply(this,arguments)}}t.Logger=n,window.logger=new n("Window");t.RTCConnection=class{constructor(e){const t=[];this.channels={},this.connection=new RTCPeerConnection,this.logger=new n("RTCConnection"),this.ws=new WebSocket(e.server),this.ws.addEventListener("message",(async({data:e})=>{const n=await new Promise((t=>t(JSON.parse(e)))).catch((()=>e));"ID"===n.event?window.id=n.id:"ANSWER"===n.event?(await this.connection.setRemoteDescription(n.sdp),t.forEach((e=>this.ws.send(JSON.stringify({_id:window.id,event:"ICECANDIDATE",candidate:e}))))):"ICECANDIDATE"===n.event&&this.connection.addIceCandidate(n.candidate)})),this.connection.addEventListener("connectionstatechange",(()=>{this.logger.debug({message:`connectionState => ${this.connection.connectionState}`})})),this.connection.addEventListener("icecandidate",(({candidate:e})=>{e&&t.push(e)})),this.connection.addEventListener("iceconnectionstatechange",(()=>{this.logger.debug({message:`iceConnectionState => ${this.connection.iceConnectionState}`})})),this.connection.addEventListener("icegatheringstatechange",(()=>{this.logger.debug({message:`iceGatheringState => ${this.connection.iceGatheringState}`})})),this.connection.addEventListener("negotiationneeded",(async()=>{await this.connection.setLocalDescription(await this.connection.createOffer()),this.ws.send(JSON.stringify({_id:window.id,event:"OFFER",sdp:this.connection.localDescription}))})),this.connection.addEventListener("signalingstatechange",(()=>{this.logger.debug({message:`signalingState => ${this.connection.signalingState}`})})),this.connection.addEventListener("track",(({streams:e,track:t})=>{this.logger.debug({args:[e],message:"[STREAMS]"}),this.logger.debug({args:[t],message:"[TRACK]"})}))}},t.injectClassNames=function(e){if(!Array.isArray(e)&&"object"==typeof e)for(const t of Object.keys(e))for(const n of[...document.getElementsByClassName(t)])n.classList.remove(t),n.classList.add(e[t])}})()})();